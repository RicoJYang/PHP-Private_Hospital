
-- Borra la base de datos si ya existe
DROP DATABASE IF EXISTS HOSPITAL;

-- Crea la base de datos desde cero
CREATE DATABASE HOSPITAL;

-- Seleccionamos la base de datos en uso
USE HOSPITAL;

-- Crear tabla PACIENTE
CREATE TABLE IF NOT EXISTS PACIENTE (
	DNI VARCHAR (9) NOT NULL, 
	NOMBRE VARCHAR (20) NOT NULL,
	APELLIDO1 VARCHAR (20) NOT NULL,
	APELLIDO2 VARCHAR (20),
	TELEFONO VARCHAR (9) NOT NULL,
	EMAIL VARCHAR (70) NOT NULL,
	FECHA_NAC DATETIME NOT NULL,	
	PRIMARY KEY (DNI)
);
	
-- Crear tabla MEDICO
CREATE TABLE IF NOT EXISTS MEDICO (
	CODIGO INTEGER (2) NOT NULL,
	NOMBRE VARCHAR (70) NOT NULL,
	PRIMARY KEY (CODIGO)
);

-- Crear tabla CONSULTA
CREATE TABLE IF NOT EXISTS CONSULTA (
	COD_MEDICO INTEGER (2) NOT NULL,
	DNI_PACIENTE VARCHAR (9) NOT NULL,
	HORA TIME NOT NULL,
	FECHA DATE NOT NULL,
	PRIMARY KEY (COD_MEDICO, HORA, FECHA),
	FOREIGN KEY (COD_MEDICO) REFERENCES MEDICO(CODIGO),
	FOREIGN KEY (DNI_PACIENTE) REFERENCES PACIENTE(DNI)
);

-- Introducir datos de PACIENTE
INSERT INTO `PACIENTE` (`DNI`, `NOMBRE`, `APELLIDO1`, `APELLIDO2`, `TELEFONO`, `EMAIL`, `FECHA_NAC`) VALUES
	('12345678C', 'PERICO', 'POCO', 'PICO', '693852741', 'pocopico@personal.example.com', '1954-11-25'),
	('12345678D', 'SOLEDAD', 'SOLA', 'SOLERA', '693852741', 'solitaria@personal.example.com', '1963-01-25'),
	('12345678F', 'GLORIA', 'BENDITA', 'BENDITA', '693852741', 'gloryhole@personal.example.com', '1979-04-30'),
	('12345678J', 'PEDRO', 'SANCHEZ', '', '693852741', 'pedrulo@personal.example.com', '1969-05-25'),
	('12345678K', 'PABLO', 'CASADO', '', '693852741', 'castrado@personal.example.com', '1976-02-02'),
	('12345678L', 'ANA', 'CARDO', 'TOSTADO', '693852741', 'frutoseco@personal.example.com', '1943-07-31'),
	('12345678P', 'PABLO', 'IGLESIAS', '', '693852741', 'pablemos@personal.example.com', '1975-11-25'),
	('12345678T', 'JUAN', 'MAGAN', '', '693852741', 'electrolatino@personal.example.com', '1977-08-20'),
	('12345678V', 'BARTOLO', 'CABEZA', 'BOLO', '693852741', 'bolondro@personal.example.com', '1976-03-08');

-- Introducir datos de MEDICO
INSERT INTO `MEDICO`(`CODIGO`, `NOMBRE`) VALUES ('1', 'DR/DRA UNAMUNO');
INSERT INTO `MEDICO`(`CODIGO`, `NOMBRE`) VALUES ('2', 'DR/DRA DOSIS');
INSERT INTO `MEDICO`(`CODIGO`, `NOMBRE`) VALUES ('3', 'DR/DRA TRIMON');
INSERT INTO `MEDICO`(`CODIGO`, `NOMBRE`) VALUES ('4', 'DR/DRA CUARESMA');

-- Introducir datos de citas de CONSULTA
INSERT INTO `consulta` (`COD_MEDICO`, `DNI_PACIENTE`, `HORA`, `FECHA`) VALUES
	(1, '12345678C', '10:00', '2019-11-28'),
	(1, '12345678R', '13:00', '2019-11-29'),
	(4, '12345678V', '11:30', '2019-11-29');

